var X=Object.defineProperty;var O=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var S=(o,e,n)=>e in o?X(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,F=(o,e)=>{for(var n in e||(e={}))Z.call(e,n)&&S(o,n,e[n]);if(O)for(var n of O(e))$.call(e,n)&&S(o,n,e[n]);return o};import{S as N,i as j,s as P,e as g,a as R,b,c as m,d,t as Y,l as v,p as x,f as w,r as D,g as K,n as C,h as ee,j as k,k as te,m as ne,o as B,q as oe,u as E,v as le,w as se,x as re,y as ie}from"./vendor.2b4357e7.js";const ae=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))t(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerpolicy&&(s.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?s.credentials="include":l.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}};ae();const ue=o=>{const e=o.slice();for(let n=o.length-1;n>1;n--){const t=Math.floor(Math.random()*n);[e[n],e[t]]=[e[t],e[n]]}return e},q=o=>o.map(e=>F({},e)),ce=(o,e)=>Array(o).fill(0).flatMap((n,t)=>Array(e).fill(0).map((l,s)=>({x:t,y:s,state:"unopened",isBomb:!1}))),fe=(o,e)=>{const n=q(o),t=ue(n.filter(l=>!l.isBomb));if(t.length<=e)throw new Error(`Invalid bomb count ${e}`);for(let l=0;l<e;l++)t[l].isBomb=!0;return n},L=(o,e,n)=>fe(ce(o,e),n),T=(o,e,n)=>o.find(t=>t.x===e&&t.y===n),W=(o,e,n)=>o.filter(t=>e-1<=t.x&&t.x<=e+1&&n-1<=t.y&&t.y<=n+1).filter(t=>t.x!==e||t.y!==n),I=(o,e,n)=>W(o,e,n).filter(t=>t.isBomb).length,z=(o,e,n)=>{let t=q(o);const l=T(t,e,n);if(!l)throw new Error(`Invalid position (${e},${n})`);if(l.state==="flagged")throw new Error("Flagged");return l.state="opened",I(t,e,n)===0&&W(t,e,n).forEach(s=>{s.state!=="opened"&&(t=z(t,s.x,s.y))}),t},de=(o,e,n)=>{const t=q(o),l=T(t,e,n);if(!l)throw new Error(`Invalid position (${e},${n})`);if(l.state==="opened")throw new Error("Already opened");return l.state=l.state==="flagged"?"unopened":"flagged",t},G=o=>{var n;const e=[];for(const t of o)e[t.y]=(n=e[t.y])!=null?n:[],e[t.y][t.x]=t;return e},pe=o=>o.every(e=>e.state==="opened"||e.isBomb),he=o=>o.some(e=>e.isBomb&&e.state==="opened"),me=o=>he(o)?"lose":pe(o)?"win":void 0;function H(o,e,n){const t=o.slice();return t[8]=e[n],t[10]=n,t}function J(o,e,n){const t=o.slice();return t[11]=e[n],t[13]=n,t}function _e(o){let e;return{c(){e=k("\xA0")},m(n,t){b(n,e,t)},p:C,d(n){n&&w(e)}}}function ge(o){let e;return{c(){e=k("\u{1F6A9}")},m(n,t){b(n,e,t)},p:C,d(n){n&&w(e)}}}function be(o){let e=(o[11].isBomb?"\u{1F4A5}":I(o[0],o[13],o[10]))+"",n;return{c(){n=k(e)},m(t,l){b(t,n,l)},p(t,l){l&1&&e!==(e=(t[11].isBomb?"\u{1F4A5}":I(t[0],t[13],t[10]))+"")&&te(n,e)},d(t){t&&w(n)}}}function Q(o){let e,n,t,l,s;function i(a,f){return a[11].state==="opened"?be:a[11].state==="flagged"?ge:_e}let r=i(o),c=r(o);function p(){return o[5](o[11],o[13],o[10])}function _(){return o[6](o[13],o[10])}return{c(){e=g("td"),n=g("button"),c.c(),n.disabled=t=o[11].state==="opened",d(n,"class","svelte-b5omn1"),Y(n,"opened",o[11].state==="opened")},m(a,f){b(a,e,f),m(e,n),c.m(n,null),l||(s=[v(n,"click",p),v(n,"contextmenu",x(_))],l=!0)},p(a,f){o=a,r===(r=i(o))&&c?c.p(o,f):(c.d(1),c=r(o),c&&(c.c(),c.m(n,null))),f&1&&t!==(t=o[11].state==="opened")&&(n.disabled=t),f&1&&Y(n,"opened",o[11].state==="opened")},d(a){a&&w(e),c.d(),l=!1,D(s)}}}function U(o){let e,n,t=o[8],l=[];for(let s=0;s<t.length;s+=1)l[s]=Q(J(o,t,s));return{c(){e=g("tr");for(let s=0;s<l.length;s+=1)l[s].c();n=R()},m(s,i){b(s,e,i);for(let r=0;r<l.length;r+=1)l[r].m(e,null);m(e,n)},p(s,i){if(i&1){t=s[8];let r;for(r=0;r<t.length;r+=1){const c=J(s,t,r);l[r]?l[r].p(c,i):(l[r]=Q(c),l[r].c(),l[r].m(e,n))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(s){s&&w(e),K(l,s)}}}function we(o){let e,n=G(o[0]),t=[];for(let l=0;l<n.length;l+=1)t[l]=U(H(o,n,l));return{c(){e=g("table");for(let l=0;l<t.length;l+=1)t[l].c();d(e,"class","svelte-b5omn1")},m(l,s){b(l,e,s);for(let i=0;i<t.length;i+=1)t[i].m(e,null)},p(l,[s]){if(s&1){n=G(l[0]);let i;for(i=0;i<n.length;i+=1){const r=H(l,n,i);t[i]?t[i].p(r,s):(t[i]=U(r),t[i].c(),t[i].m(e,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=n.length}},i:C,o:C,d(l){l&&w(e),K(t,l)}}}function ke(o,e,n){let{width:t=10}=e,{height:l=10}=e,{bombCount:s=10}=e;const i=ee();let r=L(t,l,s);const c=()=>{n(0,r=L(t,l,s))},p=(a,f,y)=>{a.state==="unopened"&&n(0,r=z(r,f,y))},_=(a,f)=>n(0,r=de(r,a,f));return o.$$set=a=>{"width"in a&&n(1,t=a.width),"height"in a&&n(2,l=a.height),"bombCount"in a&&n(3,s=a.bombCount)},o.$$.update=()=>{if(o.$$.dirty&14&&n(0,r=L(t,l,s)),o.$$.dirty&1)switch(me(r)){case"win":i("win");break;case"lose":i("lose");break}},[r,t,l,s,c,p,_]}class ye extends N{constructor(e){super();j(this,e,ke,we,P,{width:1,height:2,bombCount:3,reset:4})}get reset(){return this.$$.ctx[4]}}function ve(o){let e,n,t,l,s,i,r,c,p,_,a,f,y,M,V={width:o[0],height:o[1],bombCount:o[2]};return a=new ye({props:V}),o[8](a),a.$on("win",o[9]),a.$on("lose",o[10]),{c(){e=g("p"),n=k("width: "),t=g("input"),l=k(` / height:
  `),s=g("input"),i=k(`
  / bomb count: `),r=g("input"),c=k(`
  /
  `),p=g("button"),p.textContent="RESET",_=R(),ne(a.$$.fragment),d(t,"type","number"),d(t,"min",5),d(t,"step",1),d(t,"class","svelte-ytqr7l"),d(s,"type","number"),d(s,"min",5),d(s,"step",1),d(s,"class","svelte-ytqr7l"),d(r,"type","number"),d(r,"min",5),d(r,"step",1),d(r,"class","svelte-ytqr7l")},m(u,h){b(u,e,h),m(e,n),m(e,t),B(t,o[0]),m(e,l),m(e,s),B(s,o[1]),m(e,i),m(e,r),B(r,o[2]),m(e,c),m(e,p),b(u,_,h),oe(a,u,h),f=!0,y||(M=[v(t,"input",o[4]),v(s,"input",o[5]),v(r,"input",o[6]),v(p,"click",o[7])],y=!0)},p(u,[h]){h&1&&E(t.value)!==u[0]&&B(t,u[0]),h&2&&E(s.value)!==u[1]&&B(s,u[1]),h&4&&E(r.value)!==u[2]&&B(r,u[2]);const A={};h&1&&(A.width=u[0]),h&2&&(A.height=u[1]),h&4&&(A.bombCount=u[2]),a.$set(A)},i(u){f||(le(a.$$.fragment,u),f=!0)},o(u){se(a.$$.fragment,u),f=!1},d(u){u&&w(e),u&&w(_),o[8](null),re(a,u),y=!1,D(M)}}}function Be(o,e,n){let t=10,l=10,s=10,i;function r(){t=E(this.value),n(0,t)}function c(){l=E(this.value),n(1,l)}function p(){s=E(this.value),n(2,s)}const _=()=>i.reset();function a(M){ie[M?"unshift":"push"](()=>{i=M,n(3,i)})}return[t,l,s,i,r,c,p,_,a,()=>window.alert("\u{1F389} You win!!"),()=>window.alert("\u{1F92F} You lose.")]}class Ee extends N{constructor(e){super();j(this,e,Be,ve,P,{})}}new Ee({target:document.getElementById("app")||document.body});
